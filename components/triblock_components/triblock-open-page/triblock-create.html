<link rel="import" href="triblock-open-page-lifecycle-behavior.html">
<dom-module id="triblock-create">
	<style></style>
	<template>
		<content id="content"></content>
	</template>
</dom-module>	
<script>
	Polymer({
 		is: "triblock-create", 

 		properties:{

 			actionGroup: String,
 			createAction: String,
 			createData: {
           		type: Object,
           		readOnly: false,
           		notify: true,
           		value: {}
            },
 		},
        
        behaviors: [
			Polymer.TriBlockOpenPageLifecycleBehavior
		],

 		assignButtons: function(){
 			var createButton = null;
 			var backButton = null;
 			Polymer.dom(this.$.content).getDistributedNodes().forEach(function(node){
 				if(node.nodeType != 3){
                    this._set_componentPage(node);
 					createButton = node.querySelector("[data-block-id='createButton']");
 					backButton = node.querySelector("[data-block-id='backButton']");
 				}
 			}.bind(this), false);
 			
 			if(createButton){
                this.unlisten(createButton, "tap", "_createEvent");
 				this.listen(createButton, "tap", "_createEvent");
 			}

 			if(backButton){
                this.unlisten(backButton, "tap", "_backEvent");
 				this.listen(backButton, "tap", "_backEvent");
 			}
 		},
        
        _createEvent: function(){
            this.fire("create-button-tapped");
        },
        
        _backEvent: function(){
            this.fire("back-button-tapped");
        }
	});
</script>
